<!DOCTYPE HTML>
<html>
<head>
<title>space invadors</title>
<style>
body {
margin: 0;
padding: 0;
}
.textHolder{
width: 400px;
}
</style>
<script src="pixi.js"></script>
<audio id = "clip" autoplay loop>
      <source src="1.ogg">
      <source src="1.mp3">
  </audio
</head>
<body>  
<script>

var i = 0;
var count =0;
var stage = new PIXI.Stage(0x97c56e, true);

var renderer = PIXI.autoDetectRenderer(500, 800, null);

document.body.appendChild(renderer.view);
renderer.view.style.position = "absolute";
renderer.view.style.top = "0px";
renderer.view.style.left = "350px";
requestAnimFrame( animate );

var texture_shooter = PIXI.Texture.fromImage("shooter1.png");
var texture_ground = PIXI.Texture.fromImage("ground.jpg");
var texture_bullet = PIXI.Texture.fromImage("bullet1.png");
var tilingSprite = new PIXI.TilingSprite(texture_ground, window.innerWidth, 2397);

Shooter(Math.random() * 600, Math.random() *700);
var bullets=[];
function Shooter(x, y){
    var shooter = new PIXI.Sprite(texture_shooter);
    shooter.setInteractive(true);
    shooter.anchor.x = 0.5;
    shooter.anchor.y = 0.5;
    stage.addChild(tilingSprite);
    shooter.mousemove = shooter.touchstart = function(data)
    {
        this.data = data;
        this.alpha = 0.9;
        this.dragging = true;
    };
    shooter.mousedown = shooter.touchstart = function(data){
        this.isdown = true;

        for(i =1 ; i <99 ; i++){
            bullets[i] = new PIXI.Sprite(texture_bullet);
            bullets[i].anchor.x = 0.5;
            bullets[i].anchor.y = 0.5;
            bullets[i].position.x = shooter.position.x ;
            bullets[i].position.y = shooter.position.y -50*i;
            stage.addChild(bullets[i]);
        }
        this.alpha = 1;
    }

    shooter.mousemove = function(event){
        this.position.x = event.global.x;
        this.position.y = event.global.y;
    }
    shooter.ontouchmove = function(event){
        this.position.x = event.global.x;
        this.position.y = event.global.y;
    }

    shooter.position.x = x;
    shooter.position.y = y;

    stage.addChild(shooter);
}
var texture_enemy = PIXI.Texture.fromImage("enemy1.png");
var jeet=[];
var jeet2=[];
var jeet3=[];
var jeet4=[];

for (i=1;i<500;i++){
    jeet[i]= new PIXI.Sprite(texture_enemy);
    jeet[i].anchor.x = 0.5;
    jeet[i].anchor.y = 0.5;
    jeet[i].position.x=Math.random()*600;
    jeet[i].position.y-=Math.random()*600*i;
    stage.addChild(jeet[i]);
}

for (i=1;i<100;i++){
    jeet2[i]= new PIXI.Sprite(texture_enemy);
    jeet2[i].anchor.x = 0.5;
    jeet2[i].anchor.y = 0.5;
    jeet2[i].position.x=Math.random()*600;
    jeet2[i].position.y-=Math.random()*600*i;
    stage.addChild(jeet2[i]);
}

for (i=1;i<100;i++){
    jeet3[i]= new PIXI.Sprite(texture_enemy);
    jeet3[i].anchor.x = 0.5;
    jeet3[i].anchor.y = 0.5;
    jeet3[i].position.x=Math.random() *600;
    jeet3[i].position.y-=Math.random()*600*i;
    stage.addChild(jeet3[i]);
}
for (i=1;i<100;i++){
    jeet4[i]= new PIXI.Sprite(texture_enemy);
    jeet4[i].anchor.x = 0.5;
    jeet4[i].anchor.y = 0.5;
    jeet4[i].position.x=Math.random() *600;
    jeet4[i].position.y-=Math.random()*600*i;
    stage.addChild(jeet4[i]);
}

for (i=1;i<99;i++){
    bullets[i]= new PIXI.Sprite(texture_bullet);
    bullets[i].anchor.x = 0.5;
    bullets[i].anchor.y = 0.5;
    bullets[i].position.x=500;
    bullets[i].position.y-=2;
}

function animate() {
    requestAnimFrame( animate );

    tilingSprite.tilePosition.y += 2;

    for(var i = 1; i<100;i++){
        jeet[i].position.y+=6;

    }

    for(var i = 1; i<100;i++){
        jeet2[i].position.y+=6;
    }

    for(var i = 1; i<100;i++){
       jeet3[i].position.y+=6;
    }
    for(var i = 1; i<100;i++){
       jeet4[i].position.y+=6;
    }

    for(var i = 1; i<99;i++){
        bullets[i].position.y-=3;
    }

    renderer.render(stage);

}
</script>
</body>
</html>
